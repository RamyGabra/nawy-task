-- Create apartments table if it does not exist
CREATE TABLE IF NOT EXISTS apartments (
    id SERIAL PRIMARY KEY,
    unit_name VARCHAR(255) NOT NULL,
    unit_number VARCHAR(50) NOT NULL,
    price DECIMAL NOT NULL,
    project_name VARCHAR(255) NOT NULL,
    unit_location VARCHAR(255) NOT NULL,
    area INTEGER NOT NULL,
    bathrooms INTEGER NOT NULL,
    bedrooms INTEGER NOT NULL,
    floor_number varchar(255) NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Enable pg_trgm extension for trigram indexes
CREATE EXTENSION IF NOT EXISTS pg_trgm;

-- Create B-tree indexes (for exact matches and prefix searches)
CREATE INDEX IF NOT EXISTS idx_apartments_project_name ON apartments(project_name);
CREATE INDEX IF NOT EXISTS idx_apartments_name ON apartments(unit_name);
CREATE INDEX IF NOT EXISTS idx_apartments_unit_number ON apartments(unit_number);

-- Create trigram indexes (for substring searches with %term%)
CREATE INDEX IF NOT EXISTS idx_apartments_project_name_trgm ON apartments USING gin (project_name gin_trgm_ops);
CREATE INDEX IF NOT EXISTS idx_apartments_unit_name_trgm ON apartments USING gin (unit_name gin_trgm_ops);


-- Insert sample apartment records
INSERT INTO apartments (unit_name, unit_number, price, project_name, unit_location, area, bathrooms, bedrooms, floor_number) VALUES
('Apartment 1', 'A-001', 101000, 'Madinaty', 'Zamalek', 81, 1, 1, '1'),
('Apartment 2', 'A-002', 102000, 'Madinaty', 'Maadi', 82, 2, 2, '2'),
('Apartment 3', 'A-003', 103000, 'Madinaty', 'Nasr City', 83, 3, 3, '3'),
('Apartment 4', 'A-004', 104000, 'Madinaty', 'Heliopolis', 84, 1, 4, '4'),
('Apartment 5', 'A-005', 105000, 'Madinaty', 'Mohandessin', 85, 2, 1, '5'),
('Apartment 6', 'A-006', 106000, 'Madinaty', 'Dokki', 86, 3, 2, '6'),
('Apartment 7', 'A-007', 107000, 'Madinaty', 'Sheikh Zayed', 87, 1, 3, '7'),
('Apartment 8', 'A-008', 108000, 'Madinaty', 'New Cairo', 88, 2, 4, '8'),
('Apartment 9', 'A-009', 109000, 'Madinaty', 'Rehab', 89, 3, 1, '9'),
('Apartment 10', 'A-010', 110000, 'Madinaty', '6th of October', 90, 1, 2, '10'),
('Apartment 11', 'A-011', 111000, 'Madinaty', 'Zamalek', 91, 2, 3, '11'),
('Apartment 12', 'A-012', 112000, 'Madinaty', 'Maadi', 92, 3, 4, '12'),
('Apartment 13', 'A-013', 113000, 'Madinaty', 'Nasr City', 93, 1, 1, '13'),
('Apartment 14', 'A-014', 114000, 'Madinaty', 'Heliopolis', 94, 2, 2, '14'),
('Apartment 15', 'A-015', 115000, 'Madinaty', 'Mohandessin', 95, 3, 3, '15'),
('Apartment 16', 'A-016', 116000, 'Madinaty', 'Dokki', 96, 1, 4, '16'),
('Apartment 17', 'A-017', 117000, 'Madinaty', 'Sheikh Zayed', 97, 2, 1, '17'),
('Apartment 18', 'A-018', 118000, 'Madinaty', 'New Cairo', 98, 3, 2, '18'),
('Apartment 19', 'A-019', 119000, 'Madinaty', 'Rehab', 99, 1, 3, '19'),
('Apartment 20', 'A-020', 120000, 'Madinaty', '6th of October', 100, 2, 4, '20'),
('Apartment 21', 'A-021', 121000, 'Madinaty', 'Zamalek', 101, 3, 1, '21'),
('Apartment 22', 'A-022', 122000, 'Madinaty', 'Maadi', 102, 1, 2, '22'),
('Apartment 23', 'A-023', 123000, 'Madinaty', 'Nasr City', 103, 2, 3, '23'),
('Apartment 24', 'A-024', 124000, 'Madinaty', 'Heliopolis', 104, 3, 4, '24'),
('Apartment 25', 'A-025', 125000, 'Madinaty', 'Mohandessin', 105, 1, 1, '25'),
('Apartment 26', 'A-026', 126000, 'Madinaty', 'Dokki', 106, 2, 2, '26'),
('Apartment 27', 'A-027', 127000, 'Rehab', 'Sheikh Zayed', 107, 3, 3, '27'),
('Apartment 28', 'A-028', 128000, 'Rehab', 'New Cairo', 108, 1, 4, '28'),
('Apartment 29', 'A-029', 129000, 'Rehab', 'Rehab', 109, 2, 1, '29'),
('Apartment 30', 'A-030', 130000, 'Rehab', '6th of October', 110, 3, 2, '30'),
('Apartment 31', 'A-031', 131000, 'Rehab', 'Zamalek', 111, 1, 3, '31'),
('Apartment 32', 'A-032', 132000, 'Rehab', 'Maadi', 112, 2, 4, '32'),
('Apartment 33', 'A-033', 133000, 'Rehab', 'Nasr City', 113, 3, 1, '33'),
('Apartment 34', 'A-034', 134000, 'Rehab', 'Heliopolis', 114, 1, 2, '34'),
('Apartment 35', 'A-035', 135000, 'Rehab', 'Mohandessin', 115, 2, 3, '35'),
('Apartment 36', 'A-036', 136000, 'Rehab', 'Dokki', 116, 3, 4, '36'),
('Apartment 37', 'A-037', 137000, 'Rehab', 'Sheikh Zayed', 117, 1, 1, '37'),
('Apartment 38', 'A-038', 138000, 'Rehab', 'New Cairo', 118, 2, 2, '38'),
('Apartment 39', 'A-039', 139000, 'Rehab', 'Rehab', 119, 3, 3, '39'),
('Apartment 40', 'A-040', 140000, 'Rehab', '6th of October', 120, 1, 4, '40'),
('Apartment 41', 'A-041', 141000, 'Rehab', 'Zamalek', 121, 2, 1, '41'),
('Apartment 42', 'A-042', 142000, 'Rehab', 'Maadi', 122, 3, 2, '42'),
('Apartment 43', 'A-043', 143000, 'Rehab', 'Nasr City', 123, 1, 3, '43'),
('Apartment 44', 'A-044', 144000, 'Rehab', 'Heliopolis', 124, 2, 4, '44'),
('Apartment 45', 'A-045', 145000, 'Rehab', 'Mohandessin', 125, 3, 1, '45'),
('Apartment 46', 'A-046', 146000, 'Rehab', 'Dokki', 126, 1, 2, '46'),
('Apartment 47', 'A-047', 147000, 'Rehab', 'Sheikh Zayed', 127, 2, 3, '47'),
('Apartment 48', 'A-048', 148000, 'Rehab', 'New Cairo', 128, 3, 4, '48'),
('Apartment 49', 'A-049', 149000, 'Rehab', 'Rehab', 129, 1, 1, '49'),
('Apartment 50', 'A-050', 150000, 'Rehab', '6th of October', 130, 2, 2, '50'),
('Apartment 51', 'A-051', 151000, 'Rehab', 'Zamalek', 131, 3, 3, '51'),
('Apartment 52', 'A-052', 152000, 'Taj', 'Maadi', 132, 1, 4, '52'),
('Apartment 53', 'A-053', 153000, 'Taj', 'Nasr City', 133, 2, 1, '53'),
('Apartment 54', 'A-054', 154000, 'Taj', 'Heliopolis', 134, 3, 2, '54'),
('Apartment 55', 'A-055', 155000, 'Taj', 'Mohandessin', 135, 1, 3, '55'),
('Apartment 56', 'A-056', 156000, 'Taj', 'Dokki', 136, 2, 4, '56'),
('Apartment 57', 'A-057', 157000, 'Taj', 'Sheikh Zayed', 137, 3, 1, '57'),
('Apartment 58', 'A-058', 158000, 'Taj', 'New Cairo', 138, 1, 2, '58'),
('Apartment 59', 'A-059', 159000, 'Taj', 'Rehab', 139, 2, 3, '59'),
('Apartment 60', 'A-060', 160000, 'Taj', '6th of October', 140, 3, 4, '60'),
('Apartment 61', 'A-061', 161000, 'Taj', 'Zamalek', 141, 1, 1, '61'),
('Apartment 62', 'A-062', 162000, 'Taj', 'Maadi', 142, 2, 2, '62'),
('Apartment 63', 'A-063', 163000, 'Taj', 'Nasr City', 143, 3, 3, '63'),
('Apartment 64', 'A-064', 164000, 'Taj', 'Heliopolis', 144, 1, 4, '64'),
('Apartment 65', 'A-065', 165000, 'Taj', 'Mohandessin', 145, 2, 1, '65'),
('Apartment 66', 'A-066', 166000, 'Taj', 'Dokki', 146, 3, 2, '66'),
('Apartment 67', 'A-067', 167000, 'Taj', 'Sheikh Zayed', 147, 1, 3, '67'),
('Apartment 68', 'A-068', 168000, 'Taj', 'New Cairo', 148, 2, 4, '68'),
('Apartment 69', 'A-069', 169000, 'Taj', 'Rehab', 149, 3, 1, '69'),
('Apartment 70', 'A-070', 170000, 'Taj', '6th of October', 150, 1, 2, '70'),
('Apartment 71', 'A-071', 171000, 'Taj', 'Zamalek', 151, 2, 3, '71'),
('Apartment 72', 'A-072', 172000, 'Taj', 'Maadi', 152, 3, 4, '72'),
('Apartment 73', 'A-073', 173000, 'Taj', 'Nasr City', 153, 1, 1, '73'),
('Apartment 74', 'A-074', 174000, 'Taj', 'Heliopolis', 154, 2, 2, '74'),
('Apartment 75', 'A-075', 175000, 'Taj', 'Mohandessin', 155, 3, 3, '75'),
('Apartment 76', 'A-076', 176000, 'Taj', 'Dokki', 156, 1, 4, '76'),
('Apartment 77', 'A-077', 177000, 'Taj', 'Sheikh Zayed', 157, 2, 1, '77'),
('Apartment 78', 'A-078', 178000, 'Taj', 'New Cairo', 158, 3, 2, '78'),
('Apartment 79', 'A-079', 179000, 'Taj', 'Rehab', 159, 1, 3, '79'),
('Apartment 80', 'A-080', 180000, 'Taj', '6th of October', 160, 2, 4, '80'),
('Apartment 81', 'A-081', 181000, 'Taj', 'Zamalek', 161, 3, 1, '81'),
('Apartment 82', 'A-082', 182000, 'Taj', 'Maadi', 162, 1, 2, '82'),
('Apartment 83', 'A-083', 183000, 'Taj', 'Nasr City', 163, 2, 3, '83'),
('Apartment 84', 'A-084', 184000, 'Taj', 'Heliopolis', 164, 3, 4, '84'),
('Apartment 85', 'A-085', 185000, 'Taj', 'Mohandessin', 165, 1, 1, '85'),
('Apartment 86', 'A-086', 186000, 'Taj', 'Dokki', 166, 2, 2, '86'),
('Apartment 87', 'A-087', 187000, 'Taj', 'Sheikh Zayed', 167, 3, 3, '87'),
('Apartment 88', 'A-088', 188000, 'Taj', 'New Cairo', 168, 1, 4, '88'),
('Apartment 89', 'A-089', 189000, 'Taj', 'Rehab', 169, 2, 1, '89'),
('Apartment 90', 'A-090', 190000, 'Taj', '6th of October', 170, 3, 2, '90'),
('Apartment 91', 'A-091', 191000, 'Taj', 'Zamalek', 171, 1, 3, '91'),
('Apartment 92', 'A-092', 192000, 'Taj', 'Maadi', 172, 2, 4, '92'),
('Apartment 93', 'A-093', 193000, 'Taj', 'Nasr City', 173, 1, 1, '93'),
('Apartment 94', 'A-094', 194000, 'Taj', 'Heliopolis', 174, 2, 2, '94'),
('Apartment 95', 'A-095', 195000, 'Taj', 'Mohandessin', 175, 3, 3, '95'),
('Apartment 96', 'A-096', 196000, 'Marassi', 'Dokki', 176, 1, 4, '96'),
('Apartment 97', 'A-097', 197000, 'Marassi', 'Sheikh Zayed', 177, 2, 1, '97'),
('Apartment 98', 'A-098', 198000, 'Marassi', 'New Cairo', 178, 3, 2, '98'),
('Apartment 99', 'A-099', 199000, 'Marassi', 'Rehab', 179, 1, 3, '99'),
('Apartment 100', 'A-100', 200000, 'Marassi', '6th of October', 180, 2, 4, '100');
